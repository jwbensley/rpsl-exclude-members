<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc version 1.7.26 (Ruby 3.2.3) -->


<!DOCTYPE rfc  [
  <!ENTITY nbsp    "&#160;">
  <!ENTITY zwsp   "&#8203;">
  <!ENTITY nbhy   "&#8209;">
  <!ENTITY wj     "&#8288;">

]>


<rfc ipr="trust200902" docName="draft-bensley-rpsl-exclude-members-00" category="info" submissionType="IETF">
  <front>
    <title abbrev="Explicitly excluding RPSL objects from RPSL set objects">Explicitly excluding RPSL objects from RPSL set objects</title>

    <author initials="J." surname="Bensley" fullname="James Bensley">
      <organization>Inter.link GmbH</organization>
      <address>
        <postal>
          <street>Boxhagener Str. 80</street>
          <city>Berlin</city>
          <code>10245</code>
          <country>Germany</country>
        </postal>
        <email>james@inter.link</email>
      </address>
    </author>

    <date year="2025" month="March" day="24"/>

    
    
    

    <abstract>


<?line 25?>

<t>This document updates RFC2622 and RFC4012 by specifying <spanx style="verb">excl-members</spanx>, a new attribute on as-set and route-set objects in the Routing Policy Specification Language (RPSL). This new attribute enables the exclusion of objects from a set, which allows operators to overcome the implicit "include everything" approach of existing syntax.</t>



    </abstract>



  </front>

  <middle>


<?line 29?>

<section anchor="introduction"><name>Introduction</name>

<t>The Routing Policy Specification Language (RPSL) <xref target="RFC2622"/> defines the as-set and route-set objects. These sets can either reference a direct member of the set (such as an AS number, IP prefix, etc.), or additional sets which themselves have their own direct members and/or reference yet more sets, ad infinitum. Server and client software can follow these references to resolve a set down to its members, a set of prefixes or ASes.</t>

<t>The existing RPSL syntax allows for members of an as-set or route-set to be specified in multiple ways:</t>

<t><list style="numbers" type="1">
  <t><xref target="RFC2622"/> defines the <spanx style="verb">members</spanx> attribute.
  <list style="numbers" type="1">
      <t><xref section="5.1" sectionFormat="of" target="RFC2622"/> defines that for an as-set this attribute stores one or more primary keys, each referencing an aut-num object or or as-set object.</t>
      <t><xref section="5.2" sectionFormat="of" target="RFC2622"/> defines that for a route-set this attribute may store one or more primary keys, each referencing a route-set object which optionally has a range operator appended. Alternatively, the <spanx style="verb">members</spanx> attribute on a route-set may store an IPv4 address prefix range directly i.e., not the RPSL primary key that points a route object, and that address prefix range may optionally have a range operator appended.</t>
    </list></t>
  <t><xref section="4.2" sectionFormat="of" target="RFC4012"/> defines the <spanx style="verb">mp-members</spanx> attribute for route-sets. This attribute may store one or more primary keys, each referencing a route-set object which optionally has a range operator appended, or an IPv4 address prefix range directly, or an IPv6 address prefix range directly.</t>
  <t><xref target="RFC2622"/> defines the <spanx style="verb">mbrs-by-ref</spanx> and <spanx style="verb">member-of</spanx> attributes.
  <list style="numbers" type="1">
      <t><xref section="5.1" sectionFormat="of" target="RFC2622"/> defines that for an as-set these attributes allow for the inclusion of aut-nums in the as-set, iff the criteria defined in the RFC is met.</t>
      <t><xref section="5.2" sectionFormat="of" target="RFC2622"/> defines that for a route-set these attributes allow for the inclusion of routes in the route-set, iff the criteria defined in the RFC is met.</t>
    </list></t>
  <t><xref section="3" sectionFormat="of" target="RFC4012"/> defines the router6 class along with the <spanx style="verb">member-of</spanx> attribute on that class, and as a result, allows for the inclusion of route6 objects in a route-set, iff the criteria relating to <spanx style="verb">mbrs-by-ref</spanx> and <spanx style="verb">member-of</spanx> attributes defined in <xref section="5.2" sectionFormat="of" target="RFC2622"/> is met.</t>
</list></t>

<t>When using the <spanx style="verb">(mp)-members</spanx> attribute to include an as-set or route-set (hereinafter "included set") inside another as-set or route-set (hereinafter "including set"), all members of the included set are included in the including set. This is not just the members directly nested under the included set, but all members recursively included all the way down the RPSL hierarchy. This implicit recursive inclusion logic is hereon referred to as "greedy" logic.</t>

<t>In the example below, the as-set <spanx style="verb">AS-EXAMPLE-1</spanx> only includes one member but as a result of that single inclusion, AS-EXAMPLE-1 now contains the aut-nums AS65001, AS65002, and AS65003:</t>

<figure title="A three level hierarchy is create even though AS-EXAMPLE-1 includes only one additional as-set"><sourcecode type="rpsl"><![CDATA[
as-set: AS-EXAMPLE-1
members: AS65001, AS-EXAMPLE-2

as-set: AS-EXAMPLE-2
members: AS65002, AS-EXAMPLE-3

as-set: AS-EXAMPLE-3
members: AS65003
]]></sourcecode></figure>

<t>The same inclusion logic applies to a route-set which references another route-set in the <spanx style="verb">members</spanx> attribute; everything inside the included set, all the way down the recursed tree, is implicitly included into the including set.</t>

<t>Similarly greedy logic also applies to prefixes too; the <spanx style="verb">(mp)-members</spanx> attribute of a route-set includes any route/route6 objects which match the IPv4/6 address prefix range and the optional range operator.</t>

<t>There is a slight difference with IP prefixes though. Filters and the filter-set class are defined in <xref section="5.4" sectionFormat="of" target="RFC2622"/>. Correspondingly, the <spanx style="verb">mp-filter</spanx> attribute was later defined in <xref section="2.5.2" sectionFormat="of" target="RFC4012"/>. Together these attributes provide a way for filtering prefixes which may have been included by the greedy logic of the <spanx style="verb">(mp)-members</spanx> attributes.</t>

<t>There is currently no way to exclude either an as-set, an aut-num, or a route-set, which was included by the greedy logic of the <spanx style="verb">members</spanx> attribute on an as-set or route-set.</t>

<section anchor="requirements-language"><name>Requirements Language</name>

<t>The key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>", "<bcp14>SHALL</bcp14>", "<bcp14>SHALL
NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>NOT RECOMMENDED</bcp14>",
"<bcp14>MAY</bcp14>", and "<bcp14>OPTIONAL</bcp14>" in this document are to be interpreted as
described in BCPÂ 14 <xref target="RFC2119"/> <xref target="RFC8174"/> when, and only when, they
appear in all capitals, as shown here.</t>

<?line -18?>

</section>
<section anchor="terminology"><name>Terminology</name>

<t>In this document, the key words "<bcp14>MUST</bcp14>", "<bcp14>MUST NOT</bcp14>", "<bcp14>REQUIRED</bcp14>",
"<bcp14>SHALL</bcp14>", "<bcp14>SHALL NOT</bcp14>", "<bcp14>SHOULD</bcp14>", "<bcp14>SHOULD NOT</bcp14>", "<bcp14>RECOMMENDED</bcp14>", "<bcp14>MAY</bcp14>",
and "<bcp14>OPTIONAL</bcp14>" are to be interpreted as described in BCP 14, RFC 2119
<xref target="RFC2119"/>.</t>

</section>
</section>
<section anchor="exclusion-rule"><name>Exclusion Rule</name>

</section>


  </middle>

  <back>



    <references title='Normative References' anchor="sec-normative-references">



<reference anchor="RFC2119">
  <front>
    <title>Key words for use in RFCs to Indicate Requirement Levels</title>
    <author fullname="S. Bradner" initials="S." surname="Bradner"/>
    <date month="March" year="1997"/>
    <abstract>
      <t>In many standards track documents several words are used to signify the requirements in the specification. These words are often capitalized. This document defines these words as they should be interpreted in IETF documents. This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t>
    </abstract>
  </front>
  <seriesInfo name="BCP" value="14"/>
  <seriesInfo name="RFC" value="2119"/>
  <seriesInfo name="DOI" value="10.17487/RFC2119"/>
</reference>

<reference anchor="RFC2622">
  <front>
    <title>Routing Policy Specification Language (RPSL)</title>
    <author fullname="C. Alaettinoglu" initials="C." surname="Alaettinoglu"/>
    <author fullname="C. Villamizar" initials="C." surname="Villamizar"/>
    <author fullname="E. Gerich" initials="E." surname="Gerich"/>
    <author fullname="D. Kessens" initials="D." surname="Kessens"/>
    <author fullname="D. Meyer" initials="D." surname="Meyer"/>
    <author fullname="T. Bates" initials="T." surname="Bates"/>
    <author fullname="D. Karrenberg" initials="D." surname="Karrenberg"/>
    <author fullname="M. Terpstra" initials="M." surname="Terpstra"/>
    <date month="June" year="1999"/>
    <abstract>
      <t>RPSL allows a network operator to be able to specify routing policies at various levels in the Internet hierarchy; for example at the Autonomous System (AS) level. At the same time, policies can be specified with sufficient detail in RPSL so that low level router configurations can be generated from them. RPSL is extensible; new routing protocols and new protocol features can be introduced at any time. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="RFC" value="2622"/>
  <seriesInfo name="DOI" value="10.17487/RFC2622"/>
</reference>

<reference anchor="RFC4012">
  <front>
    <title>Routing Policy Specification Language next generation (RPSLng)</title>
    <author fullname="L. Blunk" initials="L." surname="Blunk"/>
    <author fullname="J. Damas" initials="J." surname="Damas"/>
    <author fullname="F. Parent" initials="F." surname="Parent"/>
    <author fullname="A. Robachevsky" initials="A." surname="Robachevsky"/>
    <date month="March" year="2005"/>
    <abstract>
      <t>This memo introduces a new set of simple extensions to the Routing Policy Specification Language (RPSL), enabling the language to document routing policies for the IPv6 and multicast address families currently used in the Internet. [STANDARDS-TRACK]</t>
    </abstract>
  </front>
  <seriesInfo name="RFC" value="4012"/>
  <seriesInfo name="DOI" value="10.17487/RFC4012"/>
</reference>

<reference anchor="RFC8174">
  <front>
    <title>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</title>
    <author fullname="B. Leiba" initials="B." surname="Leiba"/>
    <date month="May" year="2017"/>
    <abstract>
      <t>RFC 2119 specifies common key words that may be used in protocol specifications. This document aims to reduce the ambiguity by clarifying that only UPPERCASE usage of the key words have the defined special meanings.</t>
    </abstract>
  </front>
  <seriesInfo name="BCP" value="14"/>
  <seriesInfo name="RFC" value="8174"/>
  <seriesInfo name="DOI" value="10.17487/RFC8174"/>
</reference>




    </references>





  </back>

<!-- ##markdown-source:
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
v085plCWwEn7Ue+qpI9qwb8AxHpTOMIWAAA=

-->

</rfc>

